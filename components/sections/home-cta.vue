<template>
  <div>
    <section class="cta-section" id="app">
      <div class="cta-container-wrapper style1">
        <div class="container">
          <div class="cta-wrapper style1 section-padding fix bg-[#0A3A3C]" style="background-image: url(&quot;assets/images/shape/counterShape1_1.png&quot;) !important;">
            <div class="shape1 d-none d-xxl-block"> 
              <img src="/vendors/images/shape/ctaShape1_1.png" alt="shape" />
            </div>
            <div class="shape2 d-none d-xxl-block">
              <img src="/vendors/images/shape/ctaShape1_2.png" alt="shape" />
            </div>
            <div class="shape3 d-none d-xxl-block">
              <img src="/vendors/images/shape/ctaShape1_3.png" alt="shape" />
            </div>
            <div class="shape4 d-none d-xxl-block">
              <img src="/vendors/images/shape/ctaShape1_4.png" alt="shape" />
            </div>
            <div class="container">
              <div class="row gy-5 max-w-[1400px] mx-auto">
                <div class="col-xl-8 order-2 order-xl-1">
                  <div class="cta-content sm:max-w-[600px]">
                    <div class="section-title">
                      <div
                        class="subtitle text-white bg2 wow fadeInUp"
                        data-wow-delay=".2s"
                        style="
                          visibility: visible;
                          animation-delay: 0.2s;
                          animation-name: fadeInUp;
                        "
                      >
                      Pourquoi choisir FUTA TRANS ?
                        <img
                          src="/vendors/images/icon/fireIcon.svg"
                          alt="icon"
                        />
                      </div>
                      <h2
                        class="title text-white wow fadeInUp"
                        data-wow-delay=".4s"
                        style="
                          visibility: visible;
                          animation-delay: 0.4s;
                          animation-name: fadeInUp;
                          text-transform: none !important;
                        "
                      >
                        Ce n'est pas une app, c'est une révolution.
                      </h2>
                      <p
                        class="section-desc text-white mxw-651 wow fadeInUp"
                        data-wow-delay=".6s"
                        style="
                          visibility: visible;
                          animation-delay: 0.6s;
                          animation-name: fadeInUp;
                        "
                      >
                      FUTA TRANS, c'est un outil technologique, un levier social, un accélérateur écologique et
                      un allié économique pour toute une génération de conducteurs et de citoyens.  
                    </p>
                    </div>
                    <div class="flex justify-start items-center">
                        <a class="playstore" href="#"
                      ><img
                        src="/vendors/images/cta/ctaplayStore1_1.png"
                        alt="img"
                    /></a>
                    <a href="https://www.apple.com/store"
                      ><img
                        src="/vendors/images/cta/ctaAppleStore1_1.png"
                        alt="img"
                    /></a>
                    </div>
                  </div>
                </div>
                <div class="col-xl-4 order-1 order-xl-2">
                  <div
                    class="cta-thumb wow fadeInUp"
                    data-wow-delay=".2s"
                    style="
                      visibility: visible;
                      animation-delay: 0.2s;
                      animation-name: fadeInUp;
                    "
                  >
                   <div class="xl:-ml-32">
                    <img
                      src="/img/mockups/ctaThumb1_1.png"
                      alt="thumb"
                    />
                   </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Brand Slider Section S T A R T -->
    <div class="brand-slider-section mt-24 fix">
      <div class="brand-slider-container-wrapper style1">
        <div class="container">
          <div class="brand-slider-wrapper style1">
            <div class="text-center ">

                
                <h2
              class="single-section-title wow fadeInUp"
              data-wow-delay=".2s"
              style="text-transform: none !important"
            >
             <span class="text-5xl">
                Nos partenaires
             </span>
            </h2>
            <div class="max-w-[500px] mx-auto">
                <p class="mt-4 text-lg">
                    Rejoignez le mouvement et faites partie de la révolution du transport en Afrique.
                </p>
            </div>
            </div>
            <div class="row">
              <div class="slider-area brandSliderOne">
                <div
                  class="swiper gt-slider"
                  id="brandSliderOne"
                  ref="brandSlider"
                >
                  <div class="swiper-wrapper">
                    <div class="swiper-slide">
                      <div class="brand-logo" style="width: 120px; height: 60px; display: flex; align-items: center; justify-content: center;">
                        <img
                          src="/vendors/images/logo/brandLogo1_1.png"
                          alt="logo"
                          style="max-width: 100%; max-height: 100%; object-fit: contain;"
                          loading="lazy"
                        />
                      </div>
                    </div>
                    <div class="swiper-slide">
                      <div class="brand-logo" style="width: 120px; height: 60px; display: flex; align-items: center; justify-content: center;">
                        <img
                          src="/vendors/images/logo/brandLogo1_2.png"
                          alt="logo"
                          style="max-width: 100%; max-height: 100%; object-fit: contain;"
                          loading="lazy"
                        />
                      </div>
                    </div>
                    <div class="swiper-slide">
                      <div class="brand-logo" style="width: 120px; height: 60px; display: flex; align-items: center; justify-content: center;">
                        <img
                          src="/vendors/images/logo/brandLogo1_3.png"
                          alt="logo"
                          style="max-width: 100%; max-height: 100%; object-fit: contain;"
                          loading="lazy"
                        />
                      </div>
                    </div>
                    <div class="swiper-slide">
                      <div class="brand-logo" style="width: 120px; height: 60px; display: flex; align-items: center; justify-content: center;">
                        <img
                          src="/vendors/images/logo/brandLogo1_4.png"
                          alt="logo"
                          style="max-width: 100%; max-height: 100%; object-fit: contain;"
                          loading="lazy"
                        />
                      </div>
                    </div>
                    <div class="swiper-slide">
                      <div class="brand-logo" style="width: 120px; height: 60px; display: flex; align-items: center; justify-content: center;">
                        <img
                          src="/vendors/images/logo/brandLogo1_5.png"
                          alt="logo"
                          style="max-width: 100%; max-height: 100%; object-fit: contain;"
                          loading="lazy"
                        />
                      </div>
                    </div>
                    <div class="swiper-slide">
                      <div class="brand-logo" style="width: 120px; height: 60px; display: flex; align-items: center; justify-content: center;">
                        <img
                          src="/vendors/images/logo/brandLogo1_3.png"
                          alt="logo"
                          style="max-width: 100%; max-height: 100%; object-fit: contain;"
                          loading="lazy"
                        />
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, onMounted, nextTick } from 'vue'

const brandSlider = ref(null)

onMounted(async () => {
  // Attendre que le DOM soit complètement rendu
  await nextTick()
  
  // Initialisation explicite du slider après le montage du composant
  if (process.client && brandSlider.value) {
    // Forcer le rendu immédiat des images
    const images = brandSlider.value.querySelectorAll('img')
    images.forEach(img => {
      if (img.complete) {
        img.style.opacity = '1'
      } else {
        img.addEventListener('load', () => {
          img.style.opacity = '1'
        })
      }
    })
    
    // Attendre que Swiper soit disponible
    const initSlider = () => {
      if (window.Swiper) {
        new window.Swiper(brandSlider.value, {
          loop: true,
          autoplay: {
            delay: 3000,
            disableOnInteraction: false,
          },
          breakpoints: {
            0: {
              slidesPerView: 1,
              spaceBetween: 20
            },
            576: {
              slidesPerView: 2,
              centeredSlides: true,
              spaceBetween: 30
            },
            768: {
              slidesPerView: 3,
              spaceBetween: 40
            },
            1025: {
              slidesPerView: 4,
              spaceBetween: 50
            },
            1400: {
              slidesPerView: 5,
              spaceBetween: 60
            }
          }
        })
      } else {
        // Si Swiper n'est pas encore chargé, réessayer dans 100ms
        setTimeout(initSlider, 100)
      }
    }
    
    initSlider()
  }
})
</script>

<style scoped>
/* Styles pour optimiser le rendu du slider */
.brand-logo {
  transition: all 0.3s ease;
  width: 120px !important;
  height: 60px !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  min-width: 120px;
  min-height: 60px;
}

.brand-logo img {
  transition: transform 0.3s ease;
  max-width: 100% !important;
  max-height: 100% !important;
  object-fit: contain !important;
  width: auto;
  height: auto;
}

.brand-logo:hover img {
  transform: scale(1.05);
}

/* Préchargement des images pour éviter le FOUC */
.swiper-slide {
  opacity: 1;
  transition: opacity 0.3s ease;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  min-height: 60px;
}

.swiper-slide img {
  opacity: 1;
  transition: opacity 0.3s ease;
}

/* Forcer l'alignement du conteneur swiper */
.swiper-wrapper {
  display: flex !important;
  align-items: center !important;
}

.swiper {
  overflow: hidden;
}

/* Styles pour éviter le reflow */
.brand-slider-section {
  min-height: 120px;
}

.brandSliderOne {
  min-height: 80px;
}

/* Préchargement des images avec placeholder */
.brand-logo::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: #f5f5f5;
  z-index: -1;
}
</style>
